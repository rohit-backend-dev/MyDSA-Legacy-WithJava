# âœ…152. Maximum Product Subarray

 âœ…Given an integer array nums, find a subarray that has the largest product, and return the product.

 âœ…The test cases are generated so that the answer will fit in a 32-bit integer.



## ðŸ”Ž Example Walkthrough (Brute Force)

Input: `nums = [2,3,-2,4]`

* Start with `i=0` (`prod=1`)

  * `j=0 â†’ prod=2 â†’ maxProd=2`
  * `j=1 â†’ prod=6 â†’ maxProd=6`
  * `j=2 â†’ prod=-12 â†’ maxProd=6`
  * `j=3 â†’ prod=-48 â†’ maxProd=6`

* Start with `i=1` (`prod=1`)

  * `j=1 â†’ prod=3 â†’ maxProd=6`
  * `j=2 â†’ prod=-6 â†’ maxProd=6`
  * `j=3 â†’ prod=-24 â†’ maxProd=6`

* Start with `i=2` (`prod=1`)

  * `j=2 â†’ prod=-2 â†’ maxProd=6`
  * `j=3 â†’ prod=-8 â†’ maxProd=6`

* Start with `i=3` (`prod=1`)

  * `j=3 â†’ prod=4 â†’ maxProd=6`

âœ… Final Answer = `6`

---

## ðŸ§® Complexity

* **Brute Force:** `O(nÂ²)` time, `O(1)` space.
* **Optimal (Kadaneâ€™s variant):** `O(n)` time, `O(1)` space.

---

## âœ… Brute Force Java Code

```java
class Solution {
    public int maxProduct(int[] nums) {
        int n = nums.length;
        int maxProd = Integer.MIN_VALUE;

        for (int i = 0; i < n; i++) {
            int prod = 1;
            for (int j = i; j < n; j++) {
                prod *= nums[j];
                maxProd = Math.max(maxProd, prod);
            }
        }
        return maxProd;
    }
}

```

---

## ðŸš€ Optimal Java Code (Dynamic Programming approach)

ðŸ‘‰ Idea:

* Keep track of both **max product** and **min product** up to current index.
* Because a negative Ã— negative â†’ positive (so min can turn into max).
* Update global maximum at every step.

```java
class Solution{
    public int maxProduct(int[] nums) {
        int n = nums.length;
        
        int maxHere = nums[0]; // max product ending at current index
        int minHere = nums[0]; // min product ending at current index
        int maxProd = nums[0]; // global max

        for (int i = 1; i < n; i++) {
            if (nums[i] < 0) {
                // swap because multiplying by negative flips roles
                int temp = maxHere;
                maxHere = minHere;
                minHere = temp;
            }

            maxHere = Math.max(nums[i], maxHere * nums[i]);
            minHere = Math.min(nums[i], minHere * nums[i]);

            maxProd = Math.max(maxProd, maxHere);
        }

        return maxProd;
    }
}
```

---

### ðŸ”Ž Example Walkthrough (Optimal)

Input: `nums = [2,3,-2,4]`

* Start: `maxHere=2, minHere=2, maxProd=2`
* i=1 (`3`):

  * `maxHere = max(3, 2*3) = 6`
  * `minHere = min(3, 2*3) = 3`
  * `maxProd = 6`
* i=2 (`-2`):

  * swap â†’ (`maxHere=3`, `minHere=6`)
  * `maxHere = max(-2, 3*-2) = -2`
  * `minHere = min(-2, 6*-2) = -12`
  * `maxProd = 6`
* i=3 (`4`):

  * `maxHere = max(4, -2*4) = 4`
  * `minHere = min(4, -12*4) = -48`
  * `maxProd = 6`

âœ… Final Answer = `6`
