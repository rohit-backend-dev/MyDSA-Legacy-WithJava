LeetCode **238. Product of Array Except Self**

---

## **Problem Statement**

Given an integer array `nums`, return an array `answer` such that:

```
answer[i] = product of all nums[j] where j != i
```

Constraints:

* Must run in `O(n)` time.
* **Division is not allowed**.

---

## **Optimized Java Solution (O(1) extra space, excluding output array)**

```java
class Solution {
    public int[] productExceptSelf(int[] nums) {
        int n = nums.length;
        int[] answer = new int[n];
        
        // Step 1: Prefix products
        answer[0] = 1;
        for (int i = 1; i < n; i++) {
            answer[i] = answer[i - 1] * nums[i - 1];
        }
        
        // Step 2: Suffix products
        int suffix = 1;
        for (int i = n - 1; i >= 0; i--) {
            answer[i] *= suffix;
            suffix *= nums[i];
        }
        
        return answer;
    }
}
```

---

## **How It Works**

1. **Prefix pass** → `answer[i]` holds product of all elements to the **left** of `i`.
2. **Suffix pass** → multiply each `answer[i]` by product of all elements to the **right** of `i`.
3. No extra arrays, only `O(1)` extra space.

---

### **Example**

```
nums = [1, 2, 3, 4]

Prefix pass:  [1, 1, 2, 6]
Suffix pass:  suffix=1 → [24, 12, 8, 6]
```

Output:

```
[24, 12, 8, 6]
```

---

## **Complexity**

* **Time:** `O(n)` — two passes.
* **Space:** `O(1)` extra space (excluding output array).

